import{P as _,_ as u,a as m}from"./index-39e354ab.js";import{j as e,r as c}from"./iconBase-3b7d111a.js";import{L as w}from"./index-bc7dc0c5.js";import{a as x}from"./modalStore-d17d7ffe.js";import{c as y}from"./index-c48ce783.js";import{u as f}from"./useQueryState-f450e7e7.js";import{Q as g}from"./react-toastify.esm-9ef0ae5c.js";import{d as M}from"./dayjs.min-5ff67288.js";import{f as F,g as S}from"./index.esm-047accf7.js";import{T as L}from"./index-fbd1e212.js";import{p as T}from"./index-59c680b6.js";import{H as I}from"./index-3334a6a5.js";import{c as H,h as U,N as A}from"./index-7c3fcb85.js";import"./config-bb52a63e.js";import"./QueryClientProvider.esm-05af3f1d.js";import"./DataTable-aa997715.js";import"./formik.esm-ac5c4b53.js";import"./capitalize-1790f93b.js";import"./index-602607c3.js";async function E(s){const{queryKey:t}=s,{data:o}=await y.getCategory(t[0]);return o}function R(s){return f([s],E,null)}const V=s=>{const{category:t,onDeleteCategory:o,onUpdateCategory:r}=s;return e.exports.jsxs("div",{className:"grid lg:grid-cols-12 lg:gap-8 gap-4",children:[e.exports.jsxs("div",{className:"tile lg:col-span-4",children:[e.exports.jsx("div",{className:"flex items-center justify-center mb-4",children:e.exports.jsx("img",{src:t.image?_+"/category/"+t.image:"/img/others/box.png",className:"w-32",alt:""})}),e.exports.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.exports.jsxs("button",{onClick:r,className:"mx-auto w-full btn btn-primary btn-sm",children:["Update Category ",e.exports.jsx(F,{className:"ml-2"})]}),e.exports.jsxs("button",{className:"mx-auto w-full btn btn-danger btn-sm",onClick:o,children:["Delete Category ",e.exports.jsx(S,{className:"ml-2"})]})]})]}),e.exports.jsxs("div",{className:"tile lg:col-span-8",children:[e.exports.jsx("h4",{className:"mb-6",children:t.title}),e.exports.jsxs("div",{className:"text-sm space-y-3",children:[e.exports.jsxs("p",{children:[e.exports.jsx("span",{className:"font-bold",children:"ID:"})," ",t.idcategory]}),e.exports.jsxs("p",{children:[e.exports.jsx("span",{className:"font-bold",children:"Date Created:"})," ",M(t.dateCreated).format("DD/MM/YYYY HH:mm:ss")]}),e.exports.jsxs("p",{children:[e.exports.jsx("span",{className:"font-bold",children:"Slug:"})," ",t.slug]})]})]})]})};async function Y(s){const t=s.queryKey[1],{data:o}=await T.getAllProductsByCategory(t);return o}function k(s){return f(["products-by-category-id",s],Y,[])}const z=s=>{const{category:t}=s,{data:o,setData:r,isFetching:l,refetch:n}=k(t.idcategory);return e.exports.jsx("div",{className:"tile",children:e.exports.jsx(L,{products:o,setProducts:r,isFetching:l,refetch:n})})},B=c.exports.lazy(()=>u(()=>import("./FormUpdateCategory-f666f8cf.js"),["assets/FormUpdateCategory-f666f8cf.js","assets/iconBase-3b7d111a.js","assets/useTimeOutMessage-d962b019.js","assets/formik.esm-ac5c4b53.js","assets/react-toastify.esm-9ef0ae5c.js","assets/object-be89183a.js","assets/index-ac0909fd.js","assets/index-39e354ab.js","assets/config-bb52a63e.js","assets/index-c48ce783.js"])),q=c.exports.lazy(()=>u(()=>import("./ModalDeleteCategory-21bd3183.js"),["assets/ModalDeleteCategory-21bd3183.js","assets/iconBase-3b7d111a.js","assets/ConfirmModal-8f8003a5.js","assets/Modal-be6ca283.js","assets/index-bc7dc0c5.js","assets/index-39e354ab.js","assets/config-bb52a63e.js","assets/index.esm-047accf7.js","assets/create-visual-element-6082da53.js"])),de=s=>{const t=H(),o=U(),{data:r,setData:l,isFetching:n}=R(o.id),h=x(a=>a.setModal),j=x(a=>a.closeModal),[C,i]=c.exports.useState(!1),[b,d]=c.exports.useState(null),D=()=>{const a=P=>{l({...r,...P}),j()};h({title:"Update Category",children:e.exports.jsx(c.exports.Suspense,{fallback:e.exports.jsx(e.exports.Fragment,{}),children:e.exports.jsx(B,{category:r,onSuccess:a})}),size:"md"})},p=()=>{i(!1)},N=()=>{i(!0)},v=async()=>{try{d(!0),await y.deleteCategory(r.idcategory),p(),g.success("Category deleted successfully"),t(m.categories.path)}catch(a){console.log(a),g.error(a.response.data.message||"There was an error deleting the category")}finally{d(!1)}};return n?e.exports.jsx(w,{loading:!0}):r?e.exports.jsxs(c.exports.Fragment,{children:[e.exports.jsx(I,{to:"/categories",children:"Categories"}),e.exports.jsx(V,{category:r,onDeleteCategory:N,onUpdateCategory:D}),e.exports.jsx(z,{category:r}),e.exports.jsx(q,{onAcceptDeleteCategory:v,onCloseModalDelete:p,showModalDeleteCategory:C,category:r,isLoading:b})]}):e.exports.jsx(A,{replace:!0,to:m.categories.path})};export{de as default};
