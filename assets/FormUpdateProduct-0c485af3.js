import{j as e}from"./iconBase-3b7d111a.js";import{I as i,B as b}from"./index-ac0909fd.js";import{v as F,U as k,T as w,S as v,G as I,a as q,C as S,c as T,f as U}from"./validationSchemaFormProduct-de56b044.js";import{p as g}from"./index-59c680b6.js";import{F as C,a as D}from"./formik.esm-ac5c4b53.js";import{Q as x}from"./react-toastify.esm-9ef0ae5c.js";import"./index-39e354ab.js";import"./config-bb52a63e.js";import"./index-398deebc.js";import"./capitalize-1790f93b.js";import"./DataTable-aa997715.js";import"./index.esm-047accf7.js";import"./index-e8a8613b.js";import"./index.esm-b0814b9a.js";import"./object-be89183a.js";const Y=c=>{const{onSuccess:s,categories:p,product:t}=c,f={tags:t.tags,title:t.title,images:t.images,sizes:t.sizes,stock:t.stock,gender:t.gender,description:t.description,price:t.price,category:t.category.idcategory};async function h(y){const{images:d,...a}={...y},m=d.filter(r=>typeof r=="string");let o;a.category=p.find(r=>r.idcategory===a.category);try{o=(await g.updateProduct(c.product.id,{...a,images:m})).data}catch(r){console.log(r),x.error(r.response.data.message||"Error creating product");return}try{const r=d.filter(n=>typeof n!="string");if(r.length>0){const j=(await T(r)).map(async l=>{const u=new FormData;return u.append("file",l,l.name),(await U.uploadFileProduct(u)).data.secureUrl}),P=[...await Promise.all([...j]),...m];o=(await g.updateProduct(o.id,{images:P})).data}s==null||s(o),x.success("Product updated successfully")}catch(r){console.log(r)}}return e.exports.jsx(C,{initialValues:f,onSubmit:h,validationSchema:F,children:e.exports.jsxs(D,{children:[e.exports.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 lg:gap-8",children:[e.exports.jsxs("div",{children:[e.exports.jsx(i,{label:"Name",name:"title",required:!0,placeholder:"Type the name of the product"}),e.exports.jsx(i,{type:"number",label:"Price",name:"price",required:!0,placeholder:"Type the price of the product"}),e.exports.jsx(i,{type:"number",label:"Stock",name:"stock",required:!0,placeholder:"Type the stock of the product",decimalValues:!1}),e.exports.jsx(k,{})]}),e.exports.jsxs("div",{children:[e.exports.jsx(w,{name:"description",placeholder:"Type a description of the product",label:"Description"}),e.exports.jsx(v,{}),e.exports.jsx(I,{}),e.exports.jsx(q,{}),e.exports.jsx(S,{categories:p})]})]}),e.exports.jsx(b,{className:"btn btn-primary btn-sm mt-6",full:!0,children:"Update Product"})]})})};export{Y as default};
